{"name":"configureLoadoutTiles","type":"script","scope":"global","author":"Hhi2Yn31CW9rBwFt","img":"icons/svg/dice-target.svg","command":"const loadoutTileDialog = new Dialog({\n    title: \"Define Loadout Tile Options\", \n    content:`\n    <form>\n      <div class=\"form-group\">\n        <label>Character Name</label>\n        <input type='text' name='characterName'></input>\n      </div>\n    </form>\n    <div class=\"form-group\">\n        <label for=\"weightSelect\">Preference Weight</label>\n        <select name=\"weightSelect\">\n          <option value=0>0</option>\n          <option value=1>1</option>\n          <option value=2>2</option>\n          <option value=3>3</option>\n          <option value=4>4</option>\n          <option value=5>5</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"typeSelect\">Storage Type</label>\n        <select name=\"typeSelect\">\n          <option value=\"holster\">Holster</option>\n          <option value=\"pocket\">Pocket</option>\n          <option value=\"back/shoulder\">Back/Shoulder</option>\n          <option value=\"backpack\">Backpack</option>\n          <option value=\"duffel\">Duffel</option>\n          <option value=\"stash\">Stash</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"stateSelect\">Equipped State</label>\n        <select name=\"stateSelect\">\n          <option value=\"carried\">Carried</option>\n          <option value=\"owned\">Owned</option>\n          <option value=\"equipped\">Equipped</option>\n        </select>\n      </div>`,\n      buttons: {\n        apply: {\n            icon: \"<i class='fas fa-check'></i>\",\n            label: `Apply Changes`    \n            }\n      },\n      default: 'apply',\n      close: html => {\n        let characterName = html.find('[name=\"characterName\"]').val();\n        let tileWeight = html.find('[name=\"weightSelect\"]').val();\n        let storageType = html.find('[name=\"typeSelect\"]').val();\n        let tileState = html.find('[name=\"stateSelect\"]').val();\n        setupLoadoutTiles(characterName, tileWeight, storageType, tileState)\n      }\n\n}).render(true);\n\nasync function setupLoadoutTiles(characterName, tileWeight, storageType, tileState){\n    canvas.tiles.controlled.forEach(tile => tile.document.update({\n        \"flags.loadout\": {\n            \"owner\": game.actors.getName(characterName).id,\n            \"weight\": tileWeight,\n            \"type\": storageType,\n            \"state\": tileState\n        }\n    }))\n}","ownership":{"default":0,"Hhi2Yn31CW9rBwFt":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.WhtWH3k6FMlt7smH"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1683244512534,"modifiedTime":1689963091531,"lastModifiedBy":"Hhi2Yn31CW9rBwFt"},"folder":null,"sort":0,"_id":"fYCcLPpnVlN5VIPB"}
